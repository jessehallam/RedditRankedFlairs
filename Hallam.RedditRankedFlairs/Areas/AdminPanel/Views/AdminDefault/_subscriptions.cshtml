<div class="panel" id="panel-subscriptions" ng-class="{'panel-hidden': panel.name != 'subscriptions'}"
     ng-controller="SubscriptionController">
    <div class="panel-header">
        <h2>Manage Subscriptions</h2>
    </div>

    <div class="row" ng-controller="SubscriptionRegisterController">
        <button type="button" class="button" ng-click="execute()" ng-disabled="busy">
            <i class="fa fa-gear"></i> Auto-Detect
        </button>

        <div id="subscribe-dialog" class="modal modal-fade-in" tabindex="-1" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" ng-click="dialog.hide()">&times;</button>
                        <h4 class="modal-title">Auto Detection Results</h4>
                    </div>
                    <div class="modal-body">
                        <p>The following SubReddits can be linked:</p>
                        <div class="row" style="height: 80px; overflow: auto">
                            <ul>
                                <li ng-repeat="item in dialog.items">
                                    <label>{{item}}</label>
                                    <button type="button" class="button sm" ng-click="subscribe(item)"
                                            ng-disabled="busy">
                                        <i class="fa fa-link"></i> Link
                                    </button>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button" ng-click="dialog.hide()">
                            <i class="fa fa-ban"></i> Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-overlay"></div>
    </div>

    <div class="row">
        <table class="table" style="width: 480px">
            <thead>
                <tr>
                    <th style="width: 50%">SubReddit</th>
                    <th>Status</th>
                    <th>Functions</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="sub in subscriptions">
                    <td>{{sub.name}}</td>
                    <td>{{sub.status}}</td>
                    <td>
                        <a href="javascript:void(0)" ng-click="unsubscribe(sub)" ng-tooltip="top,Unlink this Sub Reddit.">
                            <i class="fa fa-trash"></i>
                        </a>
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr ng-show="loading">
                    <td colspan="2"><i class="fa fa-spin fa-spinner"></i> Loading...</td>
                </tr>
                <tr ng-show="!loading && !subscriptions.length">
                    <td colspan="2">No subscriptions to display.</td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>
